dist: trusty
language: go
go:
- 1.12
services:
- postgresql
addons:
  postgresql: '11.2'
go_import_path: github.com/vulcanize/mcd_transformers
before_install:
- make installtools
- bash ./scripts/install-postgres-11.sh
- curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -
- echo "deb https://dl.yarnpkg.com/debian/ stable main" | sudo tee /etc/apt/sources.list.d/yarn.list
- sudo apt-get update && sudo apt-get install yarn
before_script:
- sudo -u postgres createdb vulcanize_testing
- make version_migrations
script:
- env GO111MODULE=on make test
- env GO111MODULE=on make integrationtest
notifications:
  email: false
env:
  global:
    secure: EBMvt9pWFdaLj3Dp6VF+bDI24Nz51aQJEz45R/sFj3UmtLlZy0n265RcjYhb1eu2Ysk2QGn1g1QnOLnVKgBUK1G2jt/DNzunb10PO7LMdDmz2k9IsVqzqHZBvLVk7PMi/wATCIuWQjARrEl6q69Ibvd5Ua1wzQk2byHc4MsG+rKqX2LBClwpsWrrI/XLZ1sy4JUauRrlq8YqsytPV6w1p55oconITSlZObJg/Nsno4iUVW1jYm6740RYQbXsI8gumm+wf716QP6lTki4P8FBhxdsjyuTQMFb09DFD9I9NITB/Q7stVLMXDyFWn29K6TyP0lLH+jmmp551bpKmnFd8BHn8KzdOaGblXjCVfNqFiI2j7VS1ZwmbgnwSKwLLMJGqsxWdsyJ+Hn/gpN5oXjwjvDHYOdHHLXnCJnwSraxuqjUK7LQTGHh0kYphQZoX8fDLaRr3iRDs1OUyODsmLs49FjM4/TipOF9oEndYGbDkj1ADYmWRuR2ZNUYr1+6/UjbhhtQ9+KBGXf2JVv9dibfm1D+4SI5ykTZHwH6Tx0oLdoApY00CyQVTsgYzYUSU0y9lVa8i3RkGZXpeTLFVn1D0KxloFJThxx3xYldRHE0U5lFH7E/GqgFiA6J31/NHLpbk8NyUWjA+2QwnJJKg9qHcjrHDfMeH7Czf1SHJDlowXY=
